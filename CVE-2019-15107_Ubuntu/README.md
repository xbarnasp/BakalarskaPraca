# Otestovanie zraniteľnosti Struts na Ubuntu 19.04

Webový ovládací panel Webmin slúži na správu systému Unix. Eliminuje potrebu ručne upravovať konfiguračné súbory
systému Unix, ako napríklad /etc/passwd, a umožňuje spravovanie systému z konzoly alebo vzdialene. Preto sa 
používa vo väčšine organizácií, kde sa používajú unixové servery. Útok CVE-2019-15107 fungoval ako *backdoor*, 
čiže bol zámerne umiestnený v roku 2018 a nájdený počas bezpečnostnej konferencie DEF CON 2019, keď výskumníci 
narazili na škodlivý kód.

Každý, kto vedel o existencii zraniteľnosti, mohol využiť *backdoor*, čím mal možnosť vykonávať príkazy 
s privilégiami *root*. Podľa Jamieho Camerona, autora webového ovládacieho panela Webmin, bol 
*backdoor* vložený do verzie 1.890. Následne boli nájdené ďalšie dve verzie s takmer identickým 
kódom, konkrétne verzie 1.900 a 1.920. Do skriptu `password\_change.cgi` bola pridaná zraniteľnosť. 

## Konfigurácia Ubuntu

Pre vytvorenie zraniteľného systému sme stiahli verziu
[ovládacieho panelu Webmin 1.890](https://sourceforge.net/projects/webadmin/files/webmin/1.890/) a nainštalovali ju.

## Konfigurácia Kali Linux 

Pre zaútočenie sme vložili súbor `set-msfconsole.rc` a `HACK.sh` na plochu distribúcie Kali. Útok spustíme otvorením konzoly a spustením príkazu: 

```shell
./Desktop/HACK.sh
```

`HACK.sh` nám otvorí v konzole nástroj msfconsole pomocou súboru `set-msfconsole.rc`. V ňom sa nastaví IP zraniteľnej mašiny pomocou 
`set RHOSTS 192.168.50.40`. Ostáva nám nastaviť IP útočníka `set LHOST 192.168.50.41` a spustiť útok. 

Keďže sme využili *backdoor* a ovládací panel Webmin bežal pod privilégiami *root*, dostali sme sa do systému s privilégiami *root*. 
